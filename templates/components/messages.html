{% if messages %}
<!-- Toast Messages - Bottom Right Corner -->
<div class="fixed bottom-4 right-4 z-50 space-y-3 w-full max-w-sm">
  {% for message in messages %}
  <div
    class="ds-alert ds-alert-{% if message.tags == 'error' %}error{% elif message.tags == 'success' %}success{% elif message.tags == 'warning' %}warning{% else %}info{% endif %} p-4 flex items-center justify-between shadow-lg transform transition-all duration-300 ease-in-out opacity-0 translate-x-full animate-slide-in"
    id="toast-{{ forloop.counter }}"
  >
    <span class="text-sm">{{ message }}</span>
    <button
      type="button"
      class="ds-close ml-4 hover:opacity-75 transition-opacity"
      onclick="dismissToast('toast-{{ forloop.counter }}')"
    >
      <svg
        class="w-4 h-4"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M6 18L18 6M6 6l12 12"
        ></path>
      </svg>
    </button>
  </div>
  {% endfor %}
</div>

<style>
  @keyframes slideIn {
    from {
      opacity: 0;
      transform: translateX(100%);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  .animate-slide-in {
    animation: slideIn 0.4s ease-out forwards;
  }

  .animate-slide-out {
    animation: slideIn 0.3s ease-in reverse forwards;
  }
</style>

<script>
  function dismissToast(toastId) {
    const toast = document.getElementById(toastId);
    if (toast) {
      toast.classList.add("animate-slide-out");
      setTimeout(() => {
        toast.style.display = "none";
      }, 300);
    }
  }

  // Auto dismiss toasts after 5 seconds
  document.addEventListener("DOMContentLoaded", function () {
    const toasts = document.querySelectorAll('[id^="toast-"]');
    toasts.forEach((toast, index) => {
      // Trigger slide-in animation
      setTimeout(() => {
        toast.classList.remove("opacity-0", "translate-x-full");
      }, 100 + index * 100);

      // Auto dismiss
      setTimeout(() => {
        if (document.body.contains(toast)) {
          dismissToast(toast.id);
        }
      }, 5000 + index * 500); // Stagger auto-dismiss
    });
  });
</script>
{% endif %}
