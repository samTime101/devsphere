{% load static %}
<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <title>Weekly Routine</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
        <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="{% static 'css/components.css' %}" />
</head>
<body class="bg-dark text-light">
    <!-- TOAST MESSAGES -->
    {% include 'components/messages.html' %}

    <!-- NAVBAR -->
    {% include "components/navbar.html" %}

    <div class="max-w-2xl mx-auto px-4 py-8">
        <h2 class="text-2xl font-semibold text-center mb-6">
            SCHEDULAR - {{ user_section }}
        </h2>

        <!-- NAV TABS-->
        <div class="flex justify-between border-b border-gray-700 mb-6 overflow-x-auto text-sm">
            {% for day, entries in routines_by_day %}
            <button
                class="py-2 px-3 text-gray-300 hover:text-white border-b-2 {% if day == today %}border-primary text-white{% else %}border-transparent{% endif %} whitespace-nowrap"
                data-tab-target="#{{ day }}">
                {{ day|upper }}
            </button>
            {% endfor %}
        </div>

        <!-- TAB CONTENT -->
        <div id="routineTabsContent">
            {% for day, entries in routines_by_day %}
            <div id="{{ day }}" class="tab-pane {% if day == today %}block{% else %}hidden{% endif %}">
                {% if entries %}
                <div class="space-y-4">
                    {% for entry in entries %}
                    {% comment %} <div class="bg-gray-800 p-4 rounded-lg shadow">
                        <div class="flex justify-between items-center flex-wrap">
                            <span class="font-semibold text-white">{{ entry.time_range }}</span>
                            <span class="text-white text-right">{{ entry.subject }}</span>
                        </div>
                        <div class="text-sm text-gray-300 mt-1">
                            {{ entry.class_type }} | {{ entry.module_code }} | {{ entry.teacher }} | Room {{ entry.room }}
                        </div>
                    </div> {% endcomment %}
                    <div class="bg-gray-800 p-4 rounded-lg shadow">
                    <div class="text-white font-semibold">{{ entry.time_range }}</div>
                    <div class="text-white text-base mt-1">{{ entry.subject }}</div>
                    <div class="text-sm text-gray-300 mt-1">
                        {{ entry.class_type }} | {{ entry.module_code }} | {{ entry.teacher }} | Room {{ entry.room }}
                    </div>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <p class="text-center text-gray-500 mt-6">NO CLASSES SCHEDULED</p>
                {% endif %}
            </div>
            {% endfor %}
        </div>
    </div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>

    document.addEventListener('DOMContentLoaded', function () {
        // SELECT ALL TABS
        const tabs = document.querySelectorAll('[data-tab-target]');
        // SELECT ALL TAB CONTENTS
        const tabContents = document.querySelectorAll('.tab-pane'); 

        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                // GET TARGET CONTENT
                const target = document.querySelector(tab.dataset.tabTarget); 

                // HIDE ALL CONTENTS EXCEPT TARGET
                tabContents.forEach(tc => tc.classList.add('hidden')); 
                target.classList.remove('hidden');

                // RESET ALL TABS AND HIGHLIGHT ACTIVE TAB
                tabs.forEach(t => t.classList.remove('border-primary', 'text-white')); 
                tab.classList.add('border-primary', 'text-white');
            });
        });
    });
</script>
</body>
</html>
